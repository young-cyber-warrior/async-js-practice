## üìù –ó–∞–¥–∞—á–∞ 21: Throttling –∏ Debouncing

### –û–ø–∏—Å–∞–Ω–∏–µ

–ò–∑—É—á–∞–µ–º —Ç–µ—Ö–Ω–∏–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π - throttling –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã –∏ debouncing –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### –£—Å–ª–æ–≤–∏–µ

```javascript
–í–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏

// –°–∏–º—É–ª—è—Ü–∏—è API –¥–ª—è –ø–æ–∏—Å–∫–∞
function searchAPI(query) {
    return new Promise((resolve) => {
        console.log(`üîç –ü–æ–∏—Å–∫: "${query}"`);
        setTimeout(() => {
            resolve([
                `–†–µ–∑—É–ª—å—Ç–∞—Ç 1 –¥–ª—è "${query}"`,
                `–†–µ–∑—É–ª—å—Ç–∞—Ç 2 –¥–ª—è "${query}"`,
                `–†–µ–∑—É–ª—å—Ç–∞—Ç 3 –¥–ª—è "${query}"`
            ]);
        }, Math.random() * 500 + 100);
    });
}

// –°–∏–º—É–ª—è—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
function updateUI(data) {
    console.log(`üé® –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI:`, data.length, '—ç–ª–µ–º–µ–Ω—Ç–æ–≤');
    return Promise.resolve();
}

// –°–∏–º—É–ª—è—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
function trackEvent(eventType, data) {
    console.log(`üìä –¢—Ä–µ–∫ —Å–æ–±—ã—Ç–∏–µ: ${eventType}`, data);
    return Promise.resolve();
}
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–†–µ–∞–ª–∏–∑—É–π—Ç–µ 4 —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏:

1. **`debounce(func, delay)`**
    - –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π debounce - –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
    - –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è delay - —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä
    - –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–æ—à–ª–æ delay –º—Å —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç async —Ñ—É–Ω–∫—Ü–∏–∏
    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
2. **`throttle(func, interval)`**
    - –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π throttle - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≤—ã–∑–æ–≤–æ–≤
    - –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –º–∞–∫—Å–∏–º—É–º –æ–¥–∏–Ω —Ä–∞–∑ –≤ interval –º—Å
    - –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
    - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ—Ç interval
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç async —Ñ—É–Ω–∫—Ü–∏–∏

## üìù –ó–∞–¥–∞—á–∏ —Å 22 - 24 –±—ã–ª–∏—Ä –µ–∞–ª–∏–∑–æ–∞–≤–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–¥–∞—á–∞—Ö

## üìù –ó–∞–¥–∞—á–∞ 25: Promise Queue —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø–∏—Å–∞–Ω–∏–µ

### 1

–°–æ–∑–¥–∞–π –∫–ª–∞—Å—Å PromiseQueue —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º concurrency (–º–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö)
–î–æ–±–∞–≤—å –º–µ—Ç–æ–¥ add(asyncFn) ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å
–ó–∞–¥–∞—á–∏ –¥–æ–ª–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è
–õ–æ–≥–∏—Ä—É–π: "–ó–∞–¥–∞—á–∞ N –Ω–∞—á–∞—Ç–∞", "–ó–∞–¥–∞—á–∞ N –∑–∞–≤–µ—Ä—à–µ–Ω–∞"

### 2

–†–∞—Å—à–∏—Ä—å –∫–ª–∞—Å—Å PromiseQueue
–ú–µ—Ç–æ–¥ add() —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä: add(task, priority = 0)
–ó–∞–¥–∞—á–∏ —Å –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ä–∞–Ω—å—à–µ
–õ–æ–≥–∏—Ä—É–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

–ü—Ä–∏–Ω—Ü–∏–ø:
–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç = —á–∏—Å–ª–æ –±–æ–ª—å—à–µ
–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç = —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ
–ó–∞–¥–∞—á–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (FIFO)

### 3

–î–æ–±–∞–≤—å –º–µ—Ç–æ–¥—ã pause() –∏ resume() –≤ –∫–ª–∞—Å—Å PromiseQueue
pause() ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (—É–∂–µ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è!)
resume() ‚Äî –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏–∑ –æ—á–µ—Ä–µ–¥–∏
–õ–æ–≥–∏—Ä—É–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ (paused/resumed)

–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç: –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ —É–∂–µ –Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è, –Ω–æ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è, –ø–æ–∫–∞ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–∞—É–∑–µ!

## üìù –ó–∞–¥–∞—á–∞ 26: Async Semaphore

Semaphore ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤/–æ–ø–µ—Ä–∞—Ü–∏–π, –∏–º–µ—é—â–∏—Ö –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
–û—Ç–ª–∏—á–∏–µ –æ—Ç PromiseQueue:

PromiseQueue ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á
Semaphore ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ—Å—É—Ä—Å–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º –∫ –ë–î, —Ñ–∞–π–ª–∞–º)

–ü—Ä–∏–º–µ—Ä: –ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å 3 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î, Semaphore –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–º–∏ –ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 3 –æ–ø–µ—Ä–∞—Ü–∏–∏.

–î–æ–±–∞–≤—å –º–µ—Ç–æ–¥ with(fn) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–æ—Ç, –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Å–ª–æ—Ç
–≠—Ç–æ —É–¥–æ–±–Ω–µ–µ —á–µ–º —Ä—É—á–Ω–æ–π acquire() –∏ release()
–û–±—Ä–∞–±–æ—Ç–∞–π –æ—à–∏–±–∫–∏ –≤ try/finally –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞
–õ–æ–≥–∏—Ä—É–π –ø—Ä–æ—Ü–µ—Å—Å

–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ acquireWithTimeout(ms)
–í–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞:

–°–æ–∑–¥–∞—Ç—å –æ–±—ã—á–Ω—ã–π acquire() Promise
–°–æ–∑–¥–∞—Ç—å timeout Promise (—á–µ—Ä–µ–∑ ms –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É)
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Promise.race() ‚Äî –∫—Ç–æ –ø–µ—Ä–≤—ã–π –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, —Ç–æ—Ç –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç

–ï—Å–ª–∏ timeout –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç:

–í—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É "Timeout"
–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ (–æ–Ω –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)

–ï—Å–ª–∏ acquire() –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç:
–í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å–ª–æ—Ç –ø–æ–ª—É—á–µ–Ω)
